---
layout: post
title: 仅需两步实现内网端口映射
date: 2020-02-14 00:00:00 +0300
description: 本地调试不是梦!简单、方便、快捷！?
img: how-to-start.jpg # Add image post (optional)
tags: [基础技能] # add tag
---
昨天做好了https的连接，从智能音箱开发者后台配置了请求地址。一切ok，但是通过服务器调试仍然很麻烦。开发完成部署到服务器。开发者后台测试，失败。反复来搞太麻烦了。做过微信公众号开发的同学应该明白这个过程。  

当时开发微信的时候提供了一些本地调试的功能。好像是需要下载QQ浏览器安装插件即可。但是现在找不到了。还有一些使用花生壳进行本地映射的，但是是不是要收费？后来找到了 **ngrok**


![](https://imgkr.cn-bj.ufileos.com/3c635166-daab-40dd-bf2c-09c752849329.png)


###   ngrok能解决什么问题？
入上描述，我们在使用微信公众平台或者是其他的需要在开发者后台来配置请求地址时必须使用一个公网地址。如果我们的代码开发完成，这样做是没有问题的。但是我们肯定也是需要本地调试的啊。那么想要使用本地环境进行调试的话，就需要使用外网域名解析到本地的ip、端口。ngrok实现的就是这样的功能。  
ngrok生成一个公网访问的url，并映射到我们本机的端口上。那么我们就可以愉快的进行本地代码的调试了。


###   使用ngrok
首先肯定是需要先到ngrok的官网进行下载的。


![](https://imgkr.cn-bj.ufileos.com/5d6b12a0-77ba-4223-b826-55bdbecdaca3.png)


步骤很简单，登陆后即可进行下载。(*下载速度确实非常慢！后来用了一些技巧才下载成功*)  下载完成后按照步骤操作。

设置token后可即可进行端口开放。

```
ngrok.exe http 8443
```

![](https://imgkr.cn-bj.ufileos.com/37ea9182-1653-42be-a86d-fffe02b7ab4f.png)


本地开放的http 8443端口。 生成的外网域名包含http与https两种。

浏览器直接访问生成的外网域名进行访问测试。

现在在开发者后台配置公网访问地址进行本地调试了。

### 总结来说
其实做这个非常的简单，只需要把ngrok下载下来后导入一下authToken然后再选择要开启的端口即可。只是ngrok的下载比较麻烦。有需要的留言我发你一个网盘地址。发送<ngrok>获取（windows版本）。    
其实很多的东西看起来很简单，但是真正自己上手去做的时候又会遇到非常多的问题。但是**程序猿这个职业不就是为了解决问题而生**的么？
